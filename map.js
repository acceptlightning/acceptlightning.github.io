"use strict";function mapCallback(){window.map=new google.maps.Map(document.getElementById("map"),{center:{lat:0,lng:0},zoom:2,mapTypeControl:!1});var o=document.getElementById("search"),e=new google.maps.places.SearchBox(o);window.map.controls[google.maps.ControlPosition.TOP_LEFT].push(o),window.map.addListener("bounds_changed",function(){e.setBounds(window.map.getBounds())}),e.addListener("places_changed",function(){var o=e.getPlaces();if(0!==o.length){var n=new google.maps.LatLngBounds;o.forEach(function(o){o.geometry.viewport?n.union(o.geometry.viewport):n.extend(o.geometry.location)}),window.map.fitBounds(n)}}),$.ajax({url:"merchants.json",success:function(o){var i=new google.maps.InfoWindow;o.filter(function(o){return o.location.hasOwnProperty("latlong")}).forEach(function(e,o){var t=new google.maps.Marker({position:e.location.latlong,map:window.map}),n='<div><a id="merchant'+o+'" href="#">'+e.name+"</a></div><div>"+e.service+"</div>",a=new google.maps.InfoWindow({content:n});a.addListener("domready",function(){$("#merchant"+o).click(function(o){o.preventDefault(),$("#merchantModal").modal(),$("#merchantModalTitle").text(e.name);var n="<div>"+e.service+"</div>";e.location.hasOwnProperty("url")&&(n+='<div><a target="_blank" href="'+e.location.url+'">'+e.location.url+"</a></div>"),e.location.hasOwnProperty("city")&&(n+="<div>"+e.location.city+"</div>"),$("#merchantModalContent").html(n),window.map.setCenter(t.getPosition()),window.map.setZoom(15)})}),t.addListener("click",function(){i.close(),(i=a).open(window.map,t)})})}})}