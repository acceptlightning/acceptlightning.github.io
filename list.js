$(document).ready(()=>{$.ajax({url:"merchants.json",success:merchants=>{shuffle(merchants);const dataTableMerchants=merchants.map((merchant,i)=>{let location="Online";if(merchant.location.hasOwnProperty("city")&&merchant.location.hasOwnProperty("country")){location=`${merchant.location.city}, ${merchant.location.country}`}const merchantName=`<a id="merchant${i}" href="#">${merchant.name}</a>`;return[merchantName,merchant.service,location,merchant]});$(".table").DataTable({paging:true,pageLength:11,lengthChange:false,ordering:false,info:false,searching:true,data:dataTableMerchants,createdRow:function(row,data,i){const merchant=data[3];$(`#merchant${i}`,row).click(event=>{event.preventDefault();$("#merchantModal").modal();$("#merchantModalTitle").text(merchant.name);let modalContent=`<div>${merchant.service}</div>`;if(merchant.location.hasOwnProperty("url")){modalContent+=`<div><a target="_blank" href="${merchant.location.url}">${merchant.location.url}</a></div>`}if(merchant.location.hasOwnProperty("city")&&merchant.location.hasOwnProperty("country")){modalContent+=`<div>${merchant.location.city}, ${merchant.location.country}</div>`}$("#merchantModalContent").html(modalContent)})}})}})});function shuffle(a){for(let i=a.length-1;i>0;i--){const j=Math.floor(Math.random()*(i+1));[a[i],a[j]]=[a[j],a[i]]}return a}
